(this.webpackJsonpapraise=this.webpackJsonpapraise||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(10),s=n.n(c),r=(n(43),n(44),n(3)),o=(n(45),n(16)),l=n.n(o);const d={apiServer:""};function j(e,t){const n=d.apiServer;return console.info("> Posting data to ".concat(n).concat(e),t),l.a.post("".concat(n).concat(e),t,{withCredentials:!0})}function b(e,t,n,i){j(e,t).then((t=>{if(200!==t.status)throw console.error("Request for ".concat(e," failed with status ").concat(t.status," ").concat(t.statusText,".")),t.data;n(t.data)})).catch((e=>{console.error(e),i(e)}))}function h(e){const t=d.apiServer;return console.info("> Getting ".concat(t).concat(e)),l.a.get("".concat(t).concat(e),{withCredentials:!0})}function m(e,t,n){let i=!1;return h(e).then((n=>{if(!i){if(console.debug("< RESPONSE",e,n),200!==n.status)throw console.error("Request for ".concat(e," failed with status ").concat(n.status," ").concat(n.statusText,".")),n.data;t(n.data)}})).catch(n),()=>{i=!0}}const u=new Proxy({},{get:(e,t,n)=>({name:t,toString:()=>"status: ".concat(t)})});var g=n(0);function x(e){let{ratee:t,onSelection:n=(e=>console.log(e)),people:i}=e;const a=i.slice().sort(((e,t)=>e.name>t.name?1:-1));return Object(g.jsxs)("select",{value:t&&t.email||"",disabled:void 0!==t,required:!0,onChange:e=>n(a.find((t=>t.email===e.target.value))),children:[Object(g.jsx)("option",{value:"",children:"Choose someone to rate..."},"null"),a.map((e=>Object(g.jsx)("option",{value:e.email,children:e.name},e.email)))]})}var O=n(5),p=n(8),f=(n(66),n(67),n(34)),v=n(35);n(74);const y=e=>{let{className:t,x:n,labelX:i,trackY:a,joinY:c,labelY:s,onClick:r}=e;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("path",{onClick:r,className:"line ".concat(t),d:"M".concat(n," ").concat(a," V").concat(c," H").concat(i," V").concat(s)}),Object(g.jsx)("circle",{onClick:r,className:"point ".concat(t),cx:n,cy:a})]})},w=e=>{let{className:t="",trackWidth:n,y:i}=e;return Object(g.jsx)("line",{className:"track ".concat(t),x1:8,y1:i,x2:n+8,y2:i})},S=()=>{},k=e=>{let{labelWidth:t=115,data:n={},disabled:i=!1,value:a,onChange:c=S}=e;const[s,r]=Object(v.a)(),o=Object.keys(n).filter((e=>Array.isArray(n[e]))),l=Object.values(n).filter((e=>Array.isArray(e))).map((e=>e.sort(((e,t)=>e.point-t.point)))),d=0===r.width?900:r.width,j=0===r.height?90*l.length:r.height,b=d-16,h=(j-8)/l.length,m=Math.ceil(l.length/2),u=h*m,x=e=>b*e/100+8,O=e=>Math.min(100,Math.max(0,100*(e-8)/b)),p=t/2,k=l.map((e=>e.map((e=>{let{point:n}=e;return{desiredCenter:x(n),size:t+4}})))).map((e=>e.length>0?Object(f.removeOverlapInOneDimension)(e,8,d-8).newCenters:e)),C=void 0!==a&&null!==a?x(a):void 0,N=e=>e>=m?h*(e+1):h*e;return Object(g.jsx)("div",{ref:s,tabIndex:0,className:"Rating ".concat(i?"disabled":"enabled"),style:{padding:0,margin:0},onKeyDown:e=>{if(i)return;const t=void 0===a?0:a;"ArrowRight"===e.key?c(Math.min(100,Math.ceil(t)+1),a):"ArrowLeft"===e.key&&c(Math.max(0,Math.floor(t)-1),a)},children:Object(g.jsxs)("div",{style:{height:j,overflow:"hidden",padding:0,margin:0},children:[Object(g.jsxs)("svg",{style:{padding:0,margin:0},viewBox:"0 0 ".concat(d," ").concat(j),width:d,height:j,onClick:e=>{if(!i&&"svg"===e.target.tagName){const t=e.target.getBoundingClientRect();c(O(e.clientX-t.left),a)}},onMouseMove:e=>{if(i)return;const t=e.target;if("svg"===t.tagName&&e.buttons>0){const n=t.getBoundingClientRect();c(O(e.clientX-n.left),a)}},children:[Object(g.jsx)(w,{trackWidth:b,y:u}),void 0!==a?Object(g.jsx)(w,{className:"selected",trackWidth:C-8,y:u}):null,l.map(((e,n)=>{const s=n<m;let r=0,l=-1e3,d=-1;return e.map(((e,j)=>{let{point:b,label:m}=e;const O=x(b),f=k[n][j];l+t<f?r=0:b===d||(f>O?r++:r--),l=k[n][j]+p,d=b;let v=N(n),w=(4*r+2*h/3)*(s?1:-1)+v;return Object(g.jsx)(y,{onClick:()=>!i&&c(b,a),className:"datapoint ".concat(o[n]," ").concat(b===a?"selected":"not-selected"),x:O,labelX:f,trackY:u,joinY:w,labelY:v},"key-"+n+"-"+j)}))})),void 0!==a?Object(g.jsx)("circle",{className:"point selected",cx:C,cy:u,onClick:()=>!i&&c(void 0,a)}):null]}),l.map(((e,n)=>e.map(((e,s)=>{let{point:r,label:l}=e;const d={position:"absolute",left:k[n][s]-p,width:t};return n<m?d.top=N(n):d.bottom=j-N(n),Object(g.jsx)("div",{className:"datapoint label ".concat(o[n]," ").concat(r===a?"selected":"not-selected"),style:d,onClick:()=>{i||c(r,a)},children:l},String(r)+"-"+l)}))))]})})};function C(e){let{rating:t,otherRatings:n,axis:i,value:a,onAfterChange:c=(()=>{}),editor:s=!1}=e;const r=i.id;function o(e){if(!e||!e.ratings)return;const t=e.ratings.find((e=>{let{axis:t,score:n}=e;return Number(t)===Number(r)}));return t?Number(t.score):void 0}const l=i.referencePoints.map((e=>{let{rating:t,description:n}=e;return{point:t,label:n}})),d=n?n.reduce(((e,n)=>{const i=o(n);return void 0!==i&&n.ratee===t.ratee?[...e,{point:i,label:"".concat(n.rater," ").concat(new Date(Number(n.dateTime)).toLocaleDateString("en-gb"))}]:e}),[]):void 0;return Object(g.jsxs)("div",{className:"RatingSlider",children:[i.name,Object(g.jsx)("p",{className:"axisDescription",children:i.description}),Object(g.jsx)(k,{disabled:t&&t.permissions&&!t.permissions.ratings,data:{anchor:l,previousRatings:d},value:void 0!==a?a:o(t),onChange:c})]})}const N="Hints:\n What are this persons strengths?\n How have they improved most recently?\n Where could they improve next?\n Summary for 2021\n Any other feedback?\n \n",R="# Thoughts\n\n\nAgree / Disagree";function A(e){let{rating:t,otherRatings:n,onSubmit:a,setDirty:c=(()=>{}),ratee:s}=e;const[r,o]=Object(p.a)(void 0),[l,d]=Object(i.useState)(void 0),[j,b]=Object(p.a)({});Object(i.useEffect)((()=>{let e=!1;o((e=>t)),b((e=>({}))),d(void 0);const n=[];if(t.permissions&&!t.permissions.ratings||n.push(h("api/v1/axes?for=".concat(t.ratee)).then((e=>e.data))),t.ratings){const e=t.ratings.map((e=>{let{axis:t,score:n}=e;return t}));e.length>0&&n.push(h("api/v1/axes/".concat(e.join(","))).then((e=>e.data)))}return Promise.all(n).then((t=>{let[n,i]=t;if(e)return;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Array.isArray(e))throw console.error("axisData1 must be an array",e),new TypeError("axisData1 must be an array");const n=new Set(e.map((e=>e.id))),i=e.slice();for(const a of t)n.has(a.id)||i.push(a);return i}(n,i);d(Object.entries(function(e,t){const n={};for(let i of e){const e=t(i);void 0===n[e]&&(n[e]=[]),n[e].push(i)}return n}(a,(e=>e.category))))})),()=>{e=!0}}),[t,o,b,d]);let m=Object(g.jsx)("p",{children:"loading..."});if(l){let e=r&&r.dateTime?Object(g.jsxs)("section",{className:"ratingDescription",children:["Rating for ",r.ratee," given by ",r.rater," at ",new Date(Number(r.dateTime)).toLocaleString()]}):Object(g.jsx)(g.Fragment,{});void 0===r.comment&&o((e=>{e.comment=N}));const i=l.length>0?[l[0][0]]:[],s={comment:"Raters Comment",lmComment:"Line Managers Comment",rateeComment:"Ratee Comment"},d=r?["comment","lmComment","rateeComment"].map((e=>{const t=r.permissions&&r.permissions[e]||"comment"===e&&!r.permissions,n=void 0!==r[e];return t||n?Object(g.jsxs)("section",{children:[Object(g.jsx)("p",{children:s[e]}),Object(g.jsx)("textarea",{disabled:!t,placeholder:"rateeComment"===e?R:N,value:r[e],onChange:t=>{c(!0),o((n=>{n[e]=t.target.value})),b((e=>{e.comments=!0}))}})]},"comment-".concat(e)):Object(g.jsx)("div",{},"comment-".concat(e))})):Object(g.jsx)(g.Fragment,{}),h=r.permissions&&r.permissions.shareWithRatee||!r.permissions,u=r.permissions&&r.permissions.active,x=r.permissions&&r.permissions.acknowledgedByRatee,p=void 0===r.permissions||Object.values(r.permissions).some((e=>e));m=Object(g.jsxs)("div",{className:"ratingBody",children:[e,Object(g.jsxs)("div",{className:"ratingScoresAndComments",children:[Object(g.jsx)(O.a,{className:"ratingScores",allowMultipleExpanded:!1,allowZeroExpanded:!0,preExpanded:i.map((e=>e.replace(/\s/g,"-"))),children:l.map((e=>{let[t,i]=e;return Object(g.jsxs)(O.b,{uuid:t.replace(/\s/g,"-"),children:[Object(g.jsx)(O.d,{className:j[t]?"modified":"unmodified",children:Object(g.jsx)(O.c,{children:t})}),Object(g.jsx)(O.e,{children:i.map((e=>function(e,t,n,i,a,c,s,r){return Object(g.jsxs)("section",{className:"rating",children:[Object(g.jsx)(C,{axis:t,rating:n,otherRatings:r,onAfterChange:n=>{s(!0),i((e=>{e.ratings||(e.ratings=[]);const i=e.ratings.findIndex((e=>Number(e.axis)===Number(t.id)));i>=0?n>0?e.ratings[i].score=n:e.ratings.splice(i,1):n>0&&e.ratings.push({axis:t.id,score:n})})),a((t=>{t[e]=!0}))}}),Object(g.jsx)(g.Fragment,{}),Object(g.jsx)(g.Fragment,{})]},"axis-".concat(t.id))}(t,e,r,o,b,0,c,n)))})]},t)}))}),Object(g.jsx)("div",{className:"ratingComments",children:d})]}),Object(g.jsxs)("section",{className:"ratingFooter",children:["Share With ",t.ratee,": ",Object(g.jsx)("input",{type:"checkbox",onChange:e=>o((t=>{c(!0),t.shareWithRatee=e.target.checked})),disabled:!h,style:{marginRight:50},checked:!0===r.shareWithRatee}),u?Object(g.jsxs)(g.Fragment,{children:["Active: ",Object(g.jsx)("input",{type:"checkbox",onChange:e=>o((t=>{c(!0),t.active=e.target.checked})),style:{marginRight:50},checked:!0===r.active})]}):Object(g.jsx)(g.Fragment,{}),x||r.permissions&&r.permissions.acknowledgedByRatee?Object(g.jsxs)(g.Fragment,{children:["Acknowledged: ",Object(g.jsx)("input",{type:"checkbox",onChange:e=>o((t=>{c(!0),t.acknowledgedByRatee=e.target.checked})),style:{marginRight:50},checked:!0===r.acknowledgedByRatee})]}):Object(g.jsx)(g.Fragment,{}),a?Object(g.jsx)("button",{disabled:!p,onClick:()=>a(r),children:"Submit Rating"}):Object(g.jsx)(g.Fragment,{})]})]},"id"in t?t.id:"new-rating")}return m}n(75);const{CHOOSE:D,RATING:P,SUBMITTING:F,SUBMITTED:T}=u;var E=e=>{let{setDirty:t=(()=>{}),people:n}=e,[a,c]=Object(i.useState)(void 0),[s,r]=Object(i.useState)(D);const o=Object(i.useCallback)((e=>{e!==s&&(t(s!==P&&e===P),console.log("setting the status",s,"=>",e),r(e))}),[s,t,r]),l=e=>{o(void 0===e?D:P),c(e)};return Object(g.jsxs)("div",{className:"NewRatingPanel",children:[Object(g.jsxs)("div",{className:"ratingSelect",children:["Rate\xa0",Object(g.jsx)(x,{ratee:a,people:n,onSelection:l}),"\xa0",s===P||s===T?Object(g.jsx)("button",{onClick:()=>{if(s===P&&!window.confirm("Are you sure? This will discard your current rating."))return!1;l(void 0)},children:"Rate Someone Else"}):Object(g.jsx)(g.Fragment,{})]}),Object(g.jsxs)("div",{className:"newRatingDisplay",children:[s===P?Object(g.jsx)(A,{className:"ratingBody",ratee:a,rating:{ratee:a.email,ratings:[]},onSubmit:e=>{const t={ratee:a.email,shareWithRatee:!1,rateeComment:null,active:!0,...e};console.log("Submitting rating",e,t),b("api/v1/ratings",t,(()=>o(T)),(e=>window.alert("Problem submitting your rating"))),o(F)}}):Object(g.jsx)(g.Fragment,{}),s===T||s===F?Object(g.jsx)("div",{children:"Thank you for submitting your rating."}):Object(g.jsx)(g.Fragment,{})]})]})},M=(n(76),n(77),n(36)),I=n.n(M),B=n(18),W=n(37);const L=B.Data.Selectors,V=e=>{let{value:t}=e;return!0===t?"\u2714\ufe0f":"\u274c"},Y=[{key:"id",name:"ID",width:40},{key:"dateTime",name:"Date",formatter:e=>{let{value:t}=e;return new Date(Number(t)).toLocaleString("en-GB")},width:170,resizable:!0},{key:"ratee",name:"Ratee",filterable:!0},{key:"rater",name:"Rater",filterable:!0},{key:"shareWithRatee",name:"Shared With Ratee",formatter:V,resizable:!0,width:160},{key:"acknowledgedByRatee",name:"Acknowledged By Ratee",formatter:V,resizable:!0,width:180},{key:"active",name:"Active",formatter:V,resizable:!0,filterable:!0,width:80},{key:"rateesManager",name:"Manager",filterable:!0}],z=e=>t=>{const n={...t};return e.filterTerm?n[e.column.key]=e:delete n[e.column.key],n};function G(e){let{ratings:t,onSelect:n,selectedRating:a}=e;const[c,s]=Object(i.useState)({}),r=function(e,t){return L.getRows({rows:e,filters:t})}(t,c),o=r.indexOf(a);return Object(g.jsx)(W.a,{style:{height:"100%",width:"100%",overflow:"hidden"},children:e=>{let{height:t,width:i}=e;return Object(g.jsx)(I.a,{columns:Y,rowGetter:e=>r[e],rowsCount:r.length,toolbar:Object(g.jsx)(B.Toolbar,{enableFilter:!0}),onAddFilter:e=>s(z(e)),onClearFilters:()=>s({}),minHeight:t-50,rowSelection:{showCheckbox:!0,enableShiftSelect:!1,onRowsSelected:e=>n(e[0].row),onRowsDeselected:()=>n(void 0),selectBy:{indexes:a?[o]:[]}}})}})}var H=n(38),X=n.n(H);n(83),n(84);function q(e){let{people:t,setDirty:n=(()=>{})}=e;const[a,c]=Object(i.useState)(void 0),[s,r]=Object(i.useState)(void 0),[o,l]=Object(i.useState)(!1),[d,j]=Object(i.useState)(0);function h(e){e!==o&&(l(e),n(e))}Object(i.useEffect)((()=>m("api/v1/ratings",c,(e=>window.alert("Problem getting the ratings from the API")))),[c,d]);const u=[Object(g.jsx)(G,{ratings:a,onSelect:e=>{o&&!window.confirm("Discard this rating?")||(h(!1),r(e))},selectedRating:s})];return s&&u.push(Object(g.jsx)("div",{className:"ratingView",children:Object(g.jsx)(A,{rating:s,otherRatings:a,ratee:t.find((e=>e.email===s.ratee)),setDirty:h,onSubmit:e=>{console.log("Submitting rating",e),b("api/v1/ratings/".concat(e.id),e,(e=>{console.info("Submitted Rating",e),h(!1),j(d+1),r(void 0)}),(e=>window.alert("Problem submitting rating to API, see developer console.")))}})})),a?Object(g.jsx)(X.a,{vertical:!0,primaryIndex:1,secondaryMinSize:200,primaryMinSize:60,secondaryInitialSize:200,children:u}):Object(g.jsx)("div",{children:"Loading ratings..."})}n(85);function J(e){let{me:t,people:n,setDirty:a=(()=>{})}=e;const[c,s]=Object(i.useState)(void 0),[r,o]=Object(i.useState)(void 0),[l,d]=Object(i.useState)(!1),[j,h]=Object(i.useState)(0),u=new Date,x=new Date(u.getFullYear(),u.getMonth()-4,1).getTime();let O=!1;const p=e=>{e!==O&&(O=e,a(e))};Object(i.useEffect)((()=>m("api/v1/ratings?rater=".concat(t.email,"&dateTime=gte(").concat(x,".0)&active=true"),s,(e=>window.alert("Problem getting recent ratings.")))),[s,j,x,t.email]);const f=void 0===c||void 0===n,v=f?[]:n.filter((e=>e.team===t.team));if(f)return!1!==l&&d(!1),Object(g.jsx)("p",{children:"loading..."});const y=c.reduce(((e,t)=>({...e,[t.ratee]:t})),{}),w=e=>()=>{O&&!window.confirm("Discard this rating?")||(p(!1),d(!1),o(e))};return Object(g.jsxs)("div",{className:"TeamRate",children:[Object(g.jsxs)("div",{className:"RatingsTable",children:["Ratings for ",(S=t.team,S.substring(0,1).toUpperCase()+S.substring(1).toLowerCase())," team since ",new Date(x).toDateString(),".",Object(g.jsxs)("table",{children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Name"}),Object(g.jsx)("th",{children:"Email"}),Object(g.jsx)("th",{children:"Manager"}),Object(g.jsx)("th",{children:"Rated?"}),Object(g.jsx)("th",{children:" "})]})}),Object(g.jsx)("tbody",{children:v.map((e=>{const n=y[e.email];return Object(g.jsxs)("tr",{className:n?"teammate rated":"teammate unrated",children:[Object(g.jsx)("td",{children:e.name}),Object(g.jsx)("td",{children:e.email}),Object(g.jsx)("td",{children:e.manager}),Object(g.jsx)("td",{children:n?"\u2714\ufe0f":"\u274c"}),Object(g.jsx)("td",{children:n?Object(g.jsx)("button",{onClick:w(n),children:"Rated"}):Object(g.jsx)("button",{onClick:w({ratee:e.email,ratings:[]}),children:e.email===t.email?"Rate yourself":"Still To Rate"})})]},e.name)}))})]})]}),r&&Object(g.jsx)("div",{className:"ratingView",children:l?Object(g.jsxs)("p",{children:["Thank you for submitting your rating for ",r.ratee,"."]}):Object(g.jsx)(A,{ratee:n.find((e=>e.email===r.ratee)),rating:r,setDirty:p,onSubmit:e=>{console.log("Submitting rating",e),b("api/v1/ratings".concat(e.id?"/"+e.id:""),e,(e=>{p(!1),h(j+1)}),(e=>{window.alert("Problem submitting rating to API, see developer console for more.")})),d(!0)}})})]});var S}n(86),n(87);function U(e){let{axis:t,onSubmit:n}=e;const[a,c]=Object(p.a)(t),[s,r]=Object(i.useState)(0),[o,l]=Object(i.useState)([]),d=Object(i.useRef)(),[j,b]=Object(i.useState)(!1);Object(i.useEffect)((()=>{a.id!==t.id&&(c((e=>t)),b(!1))}),[t,c]),Object(i.useEffect)((()=>m("api/v1/people?rateable=true",(e=>l(e)))),[]);const h=Array.from(new Set(o.flatMap((e=>e.groups)))).filter((e=>e.indexOf("@")<0));return h.sort(),j?Object(g.jsx)("div",{className:"AxisEditor",children:Object(g.jsx)("p",{children:"Thank you for submitting your axis."})}):Object(g.jsxs)("div",{className:"AxisEditor",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"name",children:"Axis Name"})," ",Object(g.jsx)("input",{id:"name",type:"text",defaultValue:a.name,onChange:e=>{c((t=>{t.name=e.target.value}))}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"catgegory",children:"Category"})," ",Object(g.jsx)("input",{id:"category",type:"text",defaultValue:a.category,onChange:e=>{c((t=>{t.category=e.target.value}))}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"description",children:"Description"})," ",Object(g.jsx)("input",{id:"description",type:"text",defaultValue:a.description,onChange:e=>{c((t=>{t.description=e.target.value}))}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"active",children:"Active"})," ",Object(g.jsx)("input",{id:"active",type:"checkbox",defaultChecked:a.active,onChange:e=>{c((t=>{t.active=e.target.checked}))}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Audience"}),Object(g.jsxs)("div",{className:"audienceSetting",children:[Object(g.jsx)("ul",{children:a.audience.map((e=>Object(g.jsxs)("li",{children:[e," ",Object(g.jsx)("button",{onClick:()=>{c((t=>{t.audience=t.audience.filter((t=>t!==e))}))},children:"x"})]},e)))}),Object(g.jsxs)("p",{children:["Groups currently assigned to users: ",h.map((e=>Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"group",onClick:()=>d.current.value=e,children:e},"span-"+e),", "]})))]}),Object(g.jsx)("p",{children:"You can also use email addresses to target individuals directly."}),"Add group ",Object(g.jsx)("input",{ref:d,type:"text",defaultValue:"everyone"}),Object(g.jsx)("button",{onClick:()=>{c((e=>{const t=d.current.value;e.audience=e.audience.filter((e=>e!==t)),e.audience.push(t)}))},children:"Add"})," to the audience for this axis."]})]}),Object(g.jsx)("p",{children:"When defining general anchor points, and it makes sense to do so, aim for Grad at level 5, Junior at level 10, Engineer at level 25, Senior at 45, Lead at 65, Principal/Architect at 85, World expert 95. Ideally, the skills come in a little before the levels (e.g. 5/10/20/40/60/80/95), so that people have chance to practice before they get promoted."}),Object(g.jsx)("section",{className:"rating",children:Object(g.jsx)(C,{value:s,axis:a,editor:!0,onAfterChange:e=>r(Math.round(e))})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"anchorvalue",children:"Anchor Value"})," ",Object(g.jsx)("input",{id:"anchorvalue",readOnly:!0,type:"number",value:s})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{htmlFor:"anchortext",children:"Text"})," ",Object(g.jsx)("input",{id:"anchortext",type:"text",value:function(){const e=a.referencePoints.find((e=>e.rating===s));return e?e.description:""}(),onChange:e=>{c((t=>{let n=t.referencePoints.find((e=>e.rating===s));n||(n={rating:s},t.referencePoints.push(n)),n.description=e.target.value}))}}),Object(g.jsx)("button",{onClick:()=>{c((e=>{const t=e.referencePoints.findIndex((e=>e.rating===s));t>=0&&e.referencePoints.splice(t,1)}))},children:"x"})]}),n?Object(g.jsx)("section",{className:"submitSection",children:Object(g.jsx)("button",{onClick:()=>{n(a),b(!0)},children:"Submit Axis"})}):Object(g.jsx)(g.Fragment,{})]},a.id||"new-axis")}function K(){const[e,t]=Object(i.useState)([]),[n,a]=Object(i.useState)(void 0);return Object(i.useEffect)((()=>m("api/v1/axes?active=true",t,(e=>window.alert("Problem getting the active axes from the API")))),[t]),Object(g.jsxs)("div",{className:"AxisPanel",children:[Object(g.jsx)("div",{className:n?"AxisTable":"AxisTable noSelection",children:Object(g.jsx)("table",{children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)("button",{onClick:()=>a({name:"New Axis",category:"Category",description:"A description",audience:[],referencePoints:[]}),children:"Create"})}),Object(g.jsx)("td",{children:"Create New Axis"}),Object(g.jsx)("td",{}),Object(g.jsx)("td",{})]}),e.map((e=>Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:[Object(g.jsx)("button",{onClick:()=>a(e),children:"Edit"})," "]}),Object(g.jsx)("td",{children:e.name}),Object(g.jsx)("td",{children:e.category}),Object(g.jsx)("td",{children:e.description}),Object(g.jsx)("td",{children:e.active?"\u2714\ufe0f":"\u274c"})]},e.name)))]})})}),n?Object(g.jsx)(U,{axis:n,onSubmit:e=>{j("api/v1/axes".concat(e.id?"/"+e.id:""),e).then((e=>{200!==e.status?(console.error("Problem submitting axis",e),window.alert("Problem submitting axis, see developer console.")):console.log("Submitted",e)})).catch((e=>{console.error(e),window.alert("Problem submitting axis, see developer console.")}))}}):Object(g.jsx)(g.Fragment,{})]})}var Z=function(){console.info("Hi, thanks for trying out this appraisal system.\nI apologise for any problems you might be having with it.\nPlease contact Adam Iley on hangouts and show me any problems.");const[e,t]=Object(i.useState)(void 0),[n,a]=Object(i.useState)(void 0),[c,s]=Object(i.useState)(!1);return Object(i.useEffect)((()=>m("profile",t,(e=>window.alert("Problem getting the logged in users profile")))),[t]),Object(i.useEffect)((()=>m("api/v1/people?rateable=true",a,(e=>{window.alert("Problem getting the rateable people from the API.")}))),[a]),Object(i.useEffect)((()=>{const e=e=>c?(e.preventDefault(),e.returnValue="Do you want to leave this page - this will discard your rating."):null;return window.addEventListener("beforeunload",e,{capture:!0}),()=>{window.removeEventListener("beforeunload",e,{capture:!0})}}),[c]),e&&n?"not-logged-in"===e.status?Object(g.jsx)("div",{children:Object(g.jsxs)("p",{children:["You are not logged in.  Please go to the ",Object(g.jsx)("a",{href:"".concat(d.apiServer,"/login"),children:"login page"}),"."]})}):Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("div",{className:"appHeader",children:["Welcome ",e.name]}),Object(g.jsxs)(r.d,{className:"appTabs",onSelect:(e,t,n)=>{if(c)return!!window.confirm("Discard these changes?")&&(s(!1),!0)},children:[Object(g.jsxs)(r.b,{children:[Object(g.jsx)(r.a,{children:"Rate Someone"}),Object(g.jsx)(r.a,{children:"Rate My Team"}),Object(g.jsx)(r.a,{children:"View Ratings"}),e.groups.indexOf("lm")>=0?Object(g.jsx)(r.a,{children:"Axis Editor"}):Object(g.jsx)(g.Fragment,{})]}),Object(g.jsx)(r.c,{children:Object(g.jsx)(E,{people:n,setDirty:s})}),Object(g.jsx)(r.c,{children:Object(g.jsx)(J,{me:e,people:n,setDirty:s})}),Object(g.jsx)(r.c,{children:Object(g.jsx)(q,{people:n,setDirty:s})}),Object(g.jsx)(r.c,{children:e.groups.indexOf("lm")>=0?Object(g.jsx)(K,{}):Object(g.jsx)(g.Fragment,{})})]})]}):Object(g.jsx)("div",{children:"Loading..."})};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(Z,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.06a73a55.chunk.js.map